<li id="syntaxhighlighting" style="width: auto; background: #fff;">
    <select id="syntaxes" onchange="require('ep_etherpad-lite/static/js/pad_cookie').padcookie.setPref('SH_BRUSH', this.options[this.selectedIndex].value); window.location.reload(); interviewLang();">
        <option value="none" selected>None</option>
        <option value="javascript">JavaScript</option>
        <option value="c">C</option>
        <option value="cpp">C++</option>
        <option value="java">Java</option>
        <option value="python">Python</option>
        <option value="ruby">Ruby</option>
    </select>
</li>
<li class="separator "></li>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
    function interviewLang() {
        var sessionId = '';
var ip= window.location.href.split('/')[2];
var localIp= ip.split(':')[0];
        var request = $.ajax({
            url: "http://"+localIp+":3000/session",
            type: "GET",
            xhrFields: {
                withCredentials: true
            }
        });
        request.done(function(msg) {
            console.log(msg.email);
            sessionId = msg.email;
            var curr_inter = msg['current_interview'];
            sendRequest(curr_inter['event_name'], curr_inter['id']);
        });

        request.fail(function(jqXHR, textStatus) {
            alert("Unable to set language for compiler");
	    console.log(jqXHR, textStatus);

        });
    }

    function sendRequest(eventId, eventName) {
var ip= window.location.href.split('/')[2];
var localIp= ip.split(':')[0];
        var email = "http://"+localIp+":3000/events/" + eventId + "/interviews/" + eventName+ "/setlang";
        var lang;
        console.log(email);
        switch (syntaxes.options[syntaxes.selectedIndex].value) {
            case 'c':
                lang = 11;
                break;
            case 'java':
                lang = 10;
                break;
            case 'cpp':
                lang = 1;
                break;
            case 'python':
                lang = 4;
                break;
            case 'ruby':
                lang = 17;
                break;
            default:
                lang = 10;
                break;
        }

        console.log(lang);

        var request = $.ajax({
            url: email,
            type: "POST",
            data: {"lang": lang},
            xhrFields: {
                withCredentials: true
            }
        });
        request.done(function(msg) {
            console.log(msg);
        });
        request.fail(function(jqXHR, textStatus) {
        });
    }
</script>
